{"ast":null,"code":"import _regeneratorRuntime from\"/Users/Oliwia/bookingapp/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/Oliwia/bookingapp/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/Oliwia/bookingapp/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/Oliwia/bookingapp/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/Oliwia/bookingapp/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import React,{useContext,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{AuthContext}from\"../../context/AuthContext\";import\"./Login.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _useState=useState({username:undefined,password:undefined}),_useState2=_slicedToArray(_useState,2),credentials=_useState2[0],setCredentials=_useState2[1];var navigate=useNavigate();var _useContext=useContext(AuthContext),loading=_useContext.loading,error=_useContext.error,dispatch=_useContext.dispatch;var handleChange=function handleChange(e){setCredentials(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},e.target.id,e.target.value));});};var handleClick=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();dispatch({type:\"LOGIN_START\"});_context.prev=2;_context.next=5;return axios.post(\"auth/login\",credentials);case 5:res=_context.sent;dispatch({type:\"LOGIN_SUCCESS\",payload:res.data});navigate(\"/BookingApp\");_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](2);dispatch({type:\"LOGIN_FAILURE\",payload:_context.t0.response.data});case 13:case\"end\":return _context.stop();}}},_callee,null,[[2,10]]);}));return function handleClick(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"login\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-contianer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"username\",id:\"username\",onChange:handleChange,className:\"login-input\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"password\",id:\"password\",onChange:handleChange,className:\"password-input\"}),/*#__PURE__*/_jsx(\"button\",{disabled:loading,onClick:handleClick,className:\"login-button\",children:\"Login\"}),error&&/*#__PURE__*/_jsx(\"span\",{children:error.message})]})});};export default Login;","map":{"version":3,"names":["axios","React","useContext","useState","useNavigate","AuthContext","Login","username","undefined","password","credentials","setCredentials","navigate","loading","error","dispatch","handleChange","e","prev","target","id","value","handleClick","preventDefault","type","post","res","payload","data","response","message"],"sources":["/Users/Oliwia/bookingapp/client/src/screens/LoginPage/Login.js"],"sourcesContent":["import axios from \"axios\";\nimport React, { useContext, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport \"./Login.css\";\n\nconst Login = () => {\n  const [credentials, setCredentials] = useState({\n    username: undefined,\n    password: undefined,\n  });\n\n  const navigate = useNavigate();\n\n  const { loading, error, dispatch } = useContext(AuthContext);\n\n  const handleChange = (e) => {\n    setCredentials((prev) => ({ ...prev, [e.target.id]: e.target.value }));\n  };\n\n  const handleClick = async (e) => {\n    e.preventDefault();\n    dispatch({ type: \"LOGIN_START\" });\n    try {\n      const res = await axios.post(\"auth/login\", credentials);\n      dispatch({ type: \"LOGIN_SUCCESS\", payload: res.data });\n      navigate(\"/BookingApp\");\n    } catch (err) {\n      dispatch({ type: \"LOGIN_FAILURE\", payload: err.response.data });\n    }\n  };\n\n  return (\n    <div className=\"login\">\n      <div className=\"login-contianer\">\n        <input\n          type=\"text\"\n          placeholder=\"username\"\n          id=\"username\"\n          onChange={handleChange}\n          className=\"login-input\"\n        ></input>\n        <input\n          type=\"password\"\n          placeholder=\"password\"\n          id=\"password\"\n          onChange={handleChange}\n          className=\"password-input\"\n        ></input>\n        <button disabled={loading} onClick={handleClick} className=\"login-button\">\n          Login\n        </button>\n        {error && <span>{error.message}</span>}\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"0lBAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,MAAOC,MAAP,EAAgBC,UAAhB,CAA4BC,QAA5B,KAA4C,OAA5C,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,OAASC,WAAT,KAA4B,2BAA5B,CACA,MAAO,aAAP,C,wFAEA,GAAMC,MAAK,CAAG,QAARA,MAAQ,EAAM,CAClB,cAAsCH,QAAQ,CAAC,CAC7CI,QAAQ,CAAEC,SADmC,CAE7CC,QAAQ,CAAED,SAFmC,CAAD,CAA9C,wCAAOE,WAAP,eAAoBC,cAApB,eAKA,GAAMC,SAAQ,CAAGR,WAAW,EAA5B,CAEA,gBAAqCF,UAAU,CAACG,WAAD,CAA/C,CAAQQ,OAAR,aAAQA,OAAR,CAAiBC,KAAjB,aAAiBA,KAAjB,CAAwBC,QAAxB,aAAwBA,QAAxB,CAEA,GAAMC,aAAY,CAAG,QAAfA,aAAe,CAACC,CAAD,CAAO,CAC1BN,cAAc,CAAC,SAACO,IAAD,wCAAgBA,IAAhB,wBAAuBD,CAAC,CAACE,MAAF,CAASC,EAAhC,CAAqCH,CAAC,CAACE,MAAF,CAASE,KAA9C,IAAD,CAAd,CACD,CAFD,CAIA,GAAMC,YAAW,4FAAG,iBAAOL,CAAP,4HAClBA,CAAC,CAACM,cAAF,GACAR,QAAQ,CAAC,CAAES,IAAI,CAAE,aAAR,CAAD,CAAR,CAFkB,sCAIExB,MAAK,CAACyB,IAAN,CAAW,YAAX,CAAyBf,WAAzB,CAJF,QAIVgB,GAJU,eAKhBX,QAAQ,CAAC,CAAES,IAAI,CAAE,eAAR,CAAyBG,OAAO,CAAED,GAAG,CAACE,IAAtC,CAAD,CAAR,CACAhB,QAAQ,CAAC,aAAD,CAAR,CANgB,iFAQhBG,QAAQ,CAAC,CAAES,IAAI,CAAE,eAAR,CAAyBG,OAAO,CAAE,YAAIE,QAAJ,CAAaD,IAA/C,CAAD,CAAR,CARgB,qEAAH,kBAAXN,YAAW,4CAAjB,CAYA,mBACE,YAAK,SAAS,CAAC,OAAf,uBACE,aAAK,SAAS,CAAC,iBAAf,wBACE,cACE,IAAI,CAAC,MADP,CAEE,WAAW,CAAC,UAFd,CAGE,EAAE,CAAC,UAHL,CAIE,QAAQ,CAAEN,YAJZ,CAKE,SAAS,CAAC,aALZ,EADF,cAQE,cACE,IAAI,CAAC,UADP,CAEE,WAAW,CAAC,UAFd,CAGE,EAAE,CAAC,UAHL,CAIE,QAAQ,CAAEA,YAJZ,CAKE,SAAS,CAAC,gBALZ,EARF,cAeE,eAAQ,QAAQ,CAAEH,OAAlB,CAA2B,OAAO,CAAES,WAApC,CAAiD,SAAS,CAAC,cAA3D,mBAfF,CAkBGR,KAAK,eAAI,sBAAOA,KAAK,CAACgB,OAAb,EAlBZ,GADF,EADF,CAwBD,CAlDD,CAoDA,cAAexB,MAAf"},"metadata":{},"sourceType":"module"}